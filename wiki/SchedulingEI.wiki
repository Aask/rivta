#summary Policy för uppdatering av tidbokningsinformation i Engagemangsindex
#labels Phase-Implementation

==Policy för uppdatering av tidbokningsinformation i Engagemangsindex==

Varje tjänstedomän har ansvar att definiera policy och regler för uppdatering och hantering av information inom Engagemangsindex. 

För tjänstedomänen tidbokning gäller följande policy:

  # Endast mottagningar som är anslutna till webbtidbokning ska skicka information till Engagemangsindex. Det innebär att en konsument ska kunna anropa en producent med getBookingDetails och få ut fullständig information om bokningen/kallelsen. Det leder till att en ny producent behöver logik för att skicka endast vissa mottagningars tidbokningsinformation till EI, samt funktionalitet för när en ny mottagning aktiverar webbtidbokning, då producenten behöver grundladda EI med aktuell infomation om den mottagningen.
  # Endast framtida händelse ska finnas i EI avseende tidbokningsformation. Historiken ska rensas från EI av producenten. Producenten ska rensa information som inte längre är relevant när en bokning är passerad, när en kallelse inte längre är giltig samt när en ändring hos EI är föreslagen (addera giltighetstid till EI-post + rensningsrutin till EI). Detta är dock inte implementerat och kräver en ny version av kontrakten för EI.
  # Återladdning av EI ska kunna genomföras av en producent på uppmaning. Sannolikt kommer EI ansvara för att radera all information. Manuell rutin för att kontakta anslutna producenter. Producenterna blir ansvarig för att grundladda informationen för de anslutna mottagningarna.
  # Uppdatering av EI beror på implementationen hos producenten. Om typ (bokning/kallelse), bokningsid, och HSA-id är samma (dvs endast starttid ändras) så kan en uppdatering skickas. För övriga fall så måste befintlig EI-post raderas och en ny post skapas! 
  # Avbokning i tidboken ska rendera i att Engagemangsindexposten tas bort.
  # Ombokning i tidboken kan rendera i en uppdatering, om all information utom MostRecentContent är samma (inkl BokningsId). Anslutande part bör sträva efter att göra uppdatering vid ombokning, om det är möjligt.